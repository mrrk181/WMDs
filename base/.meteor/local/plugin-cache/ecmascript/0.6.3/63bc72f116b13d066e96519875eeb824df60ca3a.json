{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/api/documents/methods.js","filenameRelative":"/imports/api/documents/methods.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/api/documents/methods.js.map","sourceFileName":"/imports/api/documents/methods.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"methods"},"ignored":false,"code":"module.export({\n  upsertDocument: function () {\n    return upsertDocument;\n  },\n  removeDocument: function () {\n    return removeDocument;\n  }\n});\nvar SimpleSchema = void 0;\nmodule.import('meteor/aldeed:simple-schema', {\n  \"SimpleSchema\": function (v) {\n    SimpleSchema = v;\n  }\n}, 0);\nvar ValidatedMethod = void 0;\nmodule.import('meteor/mdg:validated-method', {\n  \"ValidatedMethod\": function (v) {\n    ValidatedMethod = v;\n  }\n}, 1);\nvar Documents = void 0;\nmodule.import('./documents', {\n  \"default\": function (v) {\n    Documents = v;\n  }\n}, 2);\nvar rateLimit = void 0;\nmodule.import('../../modules/rate-limit.js', {\n  \"default\": function (v) {\n    rateLimit = v;\n  }\n}, 3);\nvar upsertDocument = new ValidatedMethod({\n  name: 'documents.upsert',\n  validate: new SimpleSchema({\n    _id: {\n      type: String,\n      optional: true\n    },\n    title: {\n      type: String,\n      optional: true\n    },\n    body: {\n      type: String,\n      optional: true\n    }\n  }).validator(),\n  run: function (document) {\n    return Documents.upsert({\n      _id: document._id\n    }, {\n      $set: document\n    });\n  }\n});\nvar removeDocument = new ValidatedMethod({\n  name: 'documents.remove',\n  validate: new SimpleSchema({\n    _id: {\n      type: String\n    }\n  }).validator(),\n  run: function (_ref) {\n    var _id = _ref._id;\n    Documents.remove(_id);\n  }\n});\nrateLimit({\n  methods: [upsertDocument, removeDocument],\n  limit: 5,\n  timeRange: 1000\n});","ast":null,"map":{"version":3,"sources":["/imports/api/documents/methods.js"],"names":["module","export","upsertDocument","removeDocument","SimpleSchema","import","v","ValidatedMethod","Documents","rateLimit","name","validate","_id","type","String","optional","title","body","validator","run","document","upsert","$set","remove","methods","limit","timeRange"],"mappings":"AAAAA,OAAOC,MAAP,CAAc;AAACC,kBAAe,YAAU;AAAC,WAAOA,cAAP;AAAsB,GAAjD;AAAkDC,kBAAe,YAAU;AAAC,WAAOA,cAAP;AAAsB;AAAlG,CAAd;AAAmH,IAAIC,qBAAJ;AAAiBJ,OAAOK,MAAP,CAAc,6BAAd,EAA4C;AAAC,kBAAe,UAASC,CAAT,EAAW;AAACF,mBAAaE,CAAb;AAAe;AAA3C,CAA5C,EAAyF,CAAzF;AAA4F,IAAIC,wBAAJ;AAAoBP,OAAOK,MAAP,CAAc,6BAAd,EAA4C;AAAC,qBAAkB,UAASC,CAAT,EAAW;AAACC,sBAAgBD,CAAhB;AAAkB;AAAjD,CAA5C,EAA+F,CAA/F;AAAkG,IAAIE,kBAAJ;AAAcR,OAAOK,MAAP,CAAc,aAAd,EAA4B;AAAC,aAAU,UAASC,CAAT,EAAW;AAACE,gBAAUF,CAAV;AAAY;AAAnC,CAA5B,EAAiE,CAAjE;AAAoE,IAAIG,kBAAJ;AAAcT,OAAOK,MAAP,CAAc,6BAAd,EAA4C;AAAC,aAAU,UAASC,CAAT,EAAW;AAACG,gBAAUH,CAAV;AAAY;AAAnC,CAA5C,EAAiF,CAAjF;AAK/a,IAAMJ,iBAAiB,IAAIK,eAAJ,CAAoB;AAChDG,QAAM,kBAD0C;AAEhDC,YAAU,IAAIP,YAAJ,CAAiB;AACzBQ,SAAK;AAAEC,YAAMC,MAAR;AAAgBC,gBAAU;AAA1B,KADoB;AAEzBC,WAAO;AAAEH,YAAMC,MAAR;AAAgBC,gBAAU;AAA1B,KAFkB;AAGzBE,UAAM;AAAEJ,YAAMC,MAAR;AAAgBC,gBAAU;AAA1B;AAHmB,GAAjB,EAIPG,SAJO,EAFsC;AAOhDC,KAPgD,YAO5CC,QAP4C,EAOlC;AACZ,WAAOZ,UAAUa,MAAV,CAAiB;AAAET,WAAKQ,SAASR;AAAhB,KAAjB,EAAwC;AAAEU,YAAMF;AAAR,KAAxC,CAAP;AACD;AAT+C,CAApB,CAAvB;AAYA,IAAMjB,iBAAiB,IAAII,eAAJ,CAAoB;AAChDG,QAAM,kBAD0C;AAEhDC,YAAU,IAAIP,YAAJ,CAAiB;AACzBQ,SAAK;AAAEC,YAAMC;AAAR;AADoB,GAAjB,EAEPI,SAFO,EAFsC;AAKhDC,KALgD,kBAKnC;AAAA,QAAPP,GAAO,QAAPA,GAAO;AACXJ,cAAUe,MAAV,CAAiBX,GAAjB;AACD;AAP+C,CAApB,CAAvB;AAUPH,UAAU;AACRe,WAAS,CACPtB,cADO,EAEPC,cAFO,CADD;AAKRsB,SAAO,CALC;AAMRC,aAAW;AANH,CAAV","file":"/imports/api/documents/methods.js.map","sourcesContent":["import { SimpleSchema } from 'meteor/aldeed:simple-schema';\nimport { ValidatedMethod } from 'meteor/mdg:validated-method';\nimport Documents from './documents';\nimport rateLimit from '../../modules/rate-limit.js';\n\nexport const upsertDocument = new ValidatedMethod({\n  name: 'documents.upsert',\n  validate: new SimpleSchema({\n    _id: { type: String, optional: true },\n    title: { type: String, optional: true },\n    body: { type: String, optional: true },\n  }).validator(),\n  run(document) {\n    return Documents.upsert({ _id: document._id }, { $set: document });\n  },\n});\n\nexport const removeDocument = new ValidatedMethod({\n  name: 'documents.remove',\n  validate: new SimpleSchema({\n    _id: { type: String },\n  }).validator(),\n  run({ _id }) {\n    Documents.remove(_id);\n  },\n});\n\nrateLimit({\n  methods: [\n    upsertDocument,\n    removeDocument,\n  ],\n  limit: 5,\n  timeRange: 1000,\n});\n"]},"hash":"63bc72f116b13d066e96519875eeb824df60ca3a"}
